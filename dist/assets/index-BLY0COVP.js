import{r as m,j as s,ab as j,ad as u,ae as g,e as D,af as E,ag as R,a9 as v,ah as C}from"./index-CYeMvKJj.js";import{g as F,E as U,D as V,F as k}from"./table-C9gpqBPG.js";import{F as x,u as w,I as h}from"./index-BCg4P2IL.js";import{k as I}from"./util-BmWk2NXg.js";import{g as M,a as A,m as B,d as T}from"./role-BRnUswAr.js";import"./useBreakpoint-D7duzmMZ.js";const L=({visible:e,initialValues:n,onHide:o,onSubmit:r})=>{const[t]=x.useForm(),[a,d]=m.useState(!1),[l,{setTrue:f,setFalse:b}]=w(!1),p=!n,c=()=>{t.resetFields(),o==null||o()},y=N=>{f(),r==null||r(N).then(()=>c()).finally(()=>b())};return m.useEffect(()=>{e&&n&&t.setFieldsValue(n)},[e,n]),s.jsxDEV(j,{centered:!0,title:p?"编辑角色":"添加角色",open:e,onCancel:c,onOk:()=>t.submit(),confirmLoading:l,okButtonProps:{disabled:!a},children:s.jsxDEV(x,{form:t,autoComplete:"off",labelCol:{span:4},wrapperCol:{span:20},style:{marginTop:24},onFinish:y,onValuesChange:()=>!a&&d(!0),children:[s.jsxDEV(x.Item,{name:"key",label:"Key",rules:I,children:s.jsxDEV(h,{placeholder:"请输入",maxLength:20,showCount:!0},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:55,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:54,columnNumber:9},void 0),s.jsxDEV(x.Item,{name:"name",label:"名称",rules:[{required:!0}],children:s.jsxDEV(h,{placeholder:"请输入",maxLength:20,showCount:!0},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:58,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:45,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/form.tsx",lineNumber:36,columnNumber:5},void 0)},P=()=>{const[e,n]=m.useState(),[o,{setTrue:r,setFalse:t}]=w(!1),{loading:a,data:d,refresh:l}=u(M),{runAsync:f}=u(A,{manual:!0,onSuccess:l}),{runAsync:b}=u(B,{manual:!0,onSuccess:l}),{runAsync:p}=u(T,{manual:!0,onSuccess:l}),c=m.useMemo(()=>e?{key:e==null?void 0:e.key,name:e==null?void 0:e.name}:void 0,[e]),y=g(i=>{r(),n(i)}),N=g(async i=>e?b(i):f(i));return{table:{loading:a,data:d||[]},form:{visible:o,initialValues:c,onHide:t,onSubmit:N},showForm:y,handleDeleteRole:p}},G=()=>{const{table:e,form:n,showForm:o,handleDeleteRole:r}=P(),t=g(d=>{j.confirm({centered:!0,title:"删除角色",content:"你确定要删除此角色吗？",onOk:()=>r(d)})}),a=m.useMemo(()=>[{title:"名称",dataIndex:"name",width:200},{title:"Key",dataIndex:"key",width:200},...F(),{title:"操作",key:"action",width:180,render:(d,l)=>s.jsxDEV(D,{children:[s.jsxDEV(U,{onClick:()=>o(l)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:35,columnNumber:15},void 0),s.jsxDEV(V,{onClick:()=>t(l.key)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:36,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:34,columnNumber:13},void 0)}],[o,t]);return s.jsxDEV(E,{size:"large",title:"角色管理",children:[s.jsxDEV(R,{bordered:!1,className:"with-table",title:s.jsxDEV(v,{type:"primary",icon:s.jsxDEV(C,{},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:51,columnNumber:40},void 0),onClick:()=>o(),children:"添加角色"},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:51,columnNumber:11},void 0),children:s.jsxDEV(k,{columns:a,loading:e.loading,dataSource:e.data,scroll:{y:55*8},pagination:!1},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:56,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:47,columnNumber:7},void 0),s.jsxDEV(L,{...n},void 0,!1,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:64,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/bytedance/projects/xxl-tool-web/src/pages/system/role/index.tsx",lineNumber:46,columnNumber:5},void 0)};export{G as default};
